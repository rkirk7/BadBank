{"ast":null,"code":"import React from \"react\";\nimport { Card, CurrentUser } from \"./context\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport '../App.css';\nexport default function Home() {\n  const {\n    currentUser,\n    setCurrentUser\n  } = React.useContext(CurrentUser);\n  const authorizationURL = \"/account/authorization/\";\n  async function reviewAuthorization() {\n    console.log('trying to authorize from home');\n    var res = await fetch(authorizationURL);\n    let user = res.json();\n    console.log('found user:', user);\n    if (!user) {\n      setCurrentUser({\n        name: '',\n        email: '',\n        balance: 0,\n        password: '',\n        role: 'none'\n      });\n    } else {\n      setCurrentUser(user);\n      const url = \"/account/balance/\".concat(currentUser.email);\n      React.useEffect(() => {\n        getBalance();\n      }, []);\n      async function getBalance() {\n        var res = await fetch(url);\n        var data = await res.json();\n        setCurrentUser(user => ({\n          ...user,\n          balance: data.balance\n        }));\n      }\n    }\n  }\n  ;\n  try {\n    reviewAuthorization();\n  } catch {\n    alert('error');\n    setCurrentUser({\n      name: '',\n      email: '',\n      balance: 0,\n      password: '',\n      role: 'none'\n    });\n  }\n  return /*#__PURE__*/React.createElement(Card, {\n    bgcolor: \"primary\",\n    txtcolor: \"white\",\n    header: \"Regan's Bad Bank\",\n    title: currentUser.name != '' ? \"Welcome, \".concat(currentUser.name, \".\") : '',\n    body: currentUser.name != '' ? \"Your current balance is $\".concat(currentUser.balance, \". You can make a deposit or withdraw fake cash!\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"Please \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      className: \"mylink\"\n    }, \"log in\"), \" or \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/CreateAccount\",\n      className: \"mylink\"\n    }, \"create an account\"), \" to continue.\"),\n    centered: /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../Images/BadBankLogo.png'),\n      className: \"img-fluid\",\n      alt: \"Bank Icon\"\n    })\n  });\n}","map":{"version":3,"names":["React","Card","CurrentUser","Link","useNavigate","Home","currentUser","setCurrentUser","useContext","authorizationURL","reviewAuthorization","console","log","res","fetch","user","json","name","email","balance","password","role","url","concat","useEffect","getBalance","data","alert","createElement","bgcolor","txtcolor","header","title","body","Fragment","to","className","centered","src","require","alt"],"sources":["/Users/Regan/Documents/GitHub/BadBank/public/src/Components/home.js"],"sourcesContent":["import React from \"react\";\nimport { Card, CurrentUser } from \"./context\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport '../App.css';\n\n\nexport default function Home(){\n  const { currentUser, setCurrentUser } = React.useContext(CurrentUser);\n\n  const authorizationURL = `/account/authorization/`;\n    async function reviewAuthorization() {\n      console.log('trying to authorize from home')\n       var res = await fetch(authorizationURL);\n       let user = res.json();\n       console.log('found user:', user)\n       if (!user) {\n        setCurrentUser({\n            name: '',\n            email: '',\n            balance: 0,\n            password: '',\n            role: 'none'\n           });\n      } else {\n        setCurrentUser(user);\n        const url = `/account/balance/${currentUser.email}`;\n\n    React.useEffect(() => {\n        getBalance();\n      }, []);\n    \n      async function getBalance() {\n        var res = await fetch(url);\n        var data = await res.json();\n      setCurrentUser(user => ({\n        ...user,\n        balance: data.balance\n      }));     \n    }\n      }\n      }; \n\n     try { reviewAuthorization(); }\n     catch {\n      alert('error')\n      setCurrentUser({\n        name: '',\n        email: '',\n        balance: 0,\n        password: '',\n        role: 'none'\n       });\n     }\n\n    return (\n       <Card \n       bgcolor=\"primary\"\n       txtcolor=\"white\"\n       header=\"Regan's Bad Bank\"\n       title={currentUser.name != '' ? `Welcome, ${currentUser.name}.` : ''}       \n       body={currentUser.name != '' ? `Your current balance is $${currentUser.balance}. You can make a deposit or withdraw fake cash!` : \n       <>\n       Please <Link to=\"/login\" className=\"mylink\">log in</Link> or <Link to=\"/CreateAccount\" className=\"mylink\">create an account</Link> to continue.\n     </>\n      }       \n       centered={(<img src={require ('../Images/BadBankLogo.png')} className=\"img-fluid\" alt=\"Bank Icon\" />)}\n       \n       />\n    );\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,EAAEC,WAAW,QAAQ,WAAW;AAC7C,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,YAAY;AAGnB,eAAe,SAASC,IAAIA,CAAA,EAAE;EAC5B,MAAM;IAAEC,WAAW;IAAEC;EAAe,CAAC,GAAGP,KAAK,CAACQ,UAAU,CAACN,WAAW,CAAC;EAErE,MAAMO,gBAAgB,4BAA4B;EAChD,eAAeC,mBAAmBA,CAAA,EAAG;IACnCC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAC3C,IAAIC,GAAG,GAAG,MAAMC,KAAK,CAACL,gBAAgB,CAAC;IACvC,IAAIM,IAAI,GAAGF,GAAG,CAACG,IAAI,CAAC,CAAC;IACrBL,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEG,IAAI,CAAC;IAChC,IAAI,CAACA,IAAI,EAAE;MACVR,cAAc,CAAC;QACXU,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE,CAAC;QACVC,QAAQ,EAAE,EAAE;QACZC,IAAI,EAAE;MACP,CAAC,CAAC;IACP,CAAC,MAAM;MACLd,cAAc,CAACQ,IAAI,CAAC;MACpB,MAAMO,GAAG,uBAAAC,MAAA,CAAuBjB,WAAW,CAACY,KAAK,CAAE;MAEvDlB,KAAK,CAACwB,SAAS,CAAC,MAAM;QAClBC,UAAU,CAAC,CAAC;MACd,CAAC,EAAE,EAAE,CAAC;MAEN,eAAeA,UAAUA,CAAA,EAAG;QAC1B,IAAIZ,GAAG,GAAG,MAAMC,KAAK,CAACQ,GAAG,CAAC;QAC1B,IAAII,IAAI,GAAG,MAAMb,GAAG,CAACG,IAAI,CAAC,CAAC;QAC7BT,cAAc,CAACQ,IAAI,KAAK;UACtB,GAAGA,IAAI;UACPI,OAAO,EAAEO,IAAI,CAACP;QAChB,CAAC,CAAC,CAAC;MACL;IACE;EACA;EAAC;EAEF,IAAI;IAAET,mBAAmB,CAAC,CAAC;EAAE,CAAC,CAC9B,MAAM;IACLiB,KAAK,CAAC,OAAO,CAAC;IACdpB,cAAc,CAAC;MACbU,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE,EAAE;MACZC,IAAI,EAAE;IACP,CAAC,CAAC;EACJ;EAED,oBACGrB,KAAA,CAAA4B,aAAA,CAAC3B,IAAI;IACL4B,OAAO,EAAC,SAAS;IACjBC,QAAQ,EAAC,OAAO;IAChBC,MAAM,EAAC,kBAAkB;IACzBC,KAAK,EAAE1B,WAAW,CAACW,IAAI,IAAI,EAAE,eAAAM,MAAA,CAAejB,WAAW,CAACW,IAAI,SAAM,EAAG;IACrEgB,IAAI,EAAE3B,WAAW,CAACW,IAAI,IAAI,EAAE,+BAAAM,MAAA,CAA+BjB,WAAW,CAACa,OAAO,oEAC9EnB,KAAA,CAAA4B,aAAA,CAAA5B,KAAA,CAAAkC,QAAA,QAAE,SACK,eAAAlC,KAAA,CAAA4B,aAAA,CAACzB,IAAI;MAACgC,EAAE,EAAC,QAAQ;MAACC,SAAS,EAAC;IAAQ,GAAC,QAAY,CAAC,QAAI,eAAApC,KAAA,CAAA4B,aAAA,CAACzB,IAAI;MAACgC,EAAE,EAAC,gBAAgB;MAACC,SAAS,EAAC;IAAQ,GAAC,mBAAuB,CAAC,iBAClI,CACA;IACAC,QAAQ,eAAGrC,KAAA,CAAA4B,aAAA;MAAKU,GAAG,EAAEC,OAAO,CAAE,2BAA2B,CAAE;MAACH,SAAS,EAAC,WAAW;MAACI,GAAG,EAAC;IAAW,CAAE;EAAG,CAErG,CAAC;AAET","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}