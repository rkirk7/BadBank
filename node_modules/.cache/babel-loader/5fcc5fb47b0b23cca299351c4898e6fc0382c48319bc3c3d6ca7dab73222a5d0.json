{"ast":null,"code":"import React from \"react\";\nimport { Table, Card, CurrentUser } from \"./context\";\nexport default function AllData() {\n  const {\n    currentUser\n  } = React.useContext(CurrentUser);\n  const [data, setData] = React.useState([]);\n  const [activityData, setActivityData] = React.useState([]);\n  let userList;\n  if (currentUser.role === 'admin') {\n    React.useEffect(() => {\n      fetch('/account/all').then(response => response.json()).then(data => {\n        setData(data);\n      });\n    }, []);\n    userList = Array.isArray(data) && data.map(user => /*#__PURE__*/React.createElement(\"tr\", {\n      key: user._id\n    }, /*#__PURE__*/React.createElement(\"td\", null, user.name), /*#__PURE__*/React.createElement(\"td\", null, \"$\", user.balance), /*#__PURE__*/React.createElement(\"td\", null, user.email), /*#__PURE__*/React.createElement(\"td\", null, user._id)));\n  }\n  React.useEffect(() => {\n    fetch(\"/account/getActivity/\".concat(currentUser.email, \"/\").concat(currentUser.role)).then(response => response.json()).then(newData => {\n      setActivityData(newData);\n    });\n  }, []);\n  let activityList = Array.isArray(activityData) && activityData.slice().reverse().map(account => /*#__PURE__*/React.createElement(\"tr\", {\n    key: account._id\n  }, /*#__PURE__*/React.createElement(\"td\", null, account.email), /*#__PURE__*/React.createElement(\"td\", null, account.activity), /*#__PURE__*/React.createElement(\"td\", null, new Date(account.date).toLocaleString())));\n  return /*#__PURE__*/React.createElement(\"div\", null, currentUser.role === \"admin\" && /*#__PURE__*/React.createElement(Card, {\n    bgcolor: \"primary\",\n    txtcolor: \"white\",\n    header: \"Admin: All Users\",\n    body: /*#__PURE__*/React.createElement(Table, {\n      id: \"usertable\",\n      col1: \"Name\",\n      col2: \"Balance\",\n      col3: \"Email\",\n      col4: \"ID\",\n      list: userList\n    })\n  }), /*#__PURE__*/React.createElement(Card, {\n    bgcolor: \"primary\",\n    txtcolor: \"white\",\n    header: currentUser.role === \"admin\" ? \"Admin: All Bank Activity\" : \"My Activity\",\n    body: /*#__PURE__*/React.createElement(Table, {\n      id: \"activitytable\",\n      col1: \"Email\",\n      col2: \"Activity\",\n      col3: \"Date\",\n      list: activityList\n    })\n  }));\n}","map":{"version":3,"names":["React","Table","Card","CurrentUser","AllData","currentUser","useContext","data","setData","useState","activityData","setActivityData","userList","role","useEffect","fetch","then","response","json","Array","isArray","map","user","createElement","key","_id","name","balance","email","concat","newData","activityList","slice","reverse","account","activity","Date","date","toLocaleString","bgcolor","txtcolor","header","body","id","col1","col2","col3","col4","list"],"sources":["/Users/Regan/Documents/GitHub/BadBank/public/src/Components/alldata.js"],"sourcesContent":["import React from \"react\";\nimport {Table, Card, CurrentUser} from \"./context\";\n\n\nexport default function AllData(){\n\n  const { currentUser } = React.useContext(CurrentUser);\n  const [data, setData] = React.useState([]);\n  const [activityData, setActivityData] = React.useState([]);\n  let userList;\n\n  if (currentUser.role === 'admin') {\n  React.useEffect(() => {\n    fetch('/account/all')\n    .then(response => response.json())\n    .then(data => {\n      setData(data);\n    });\n  }, []);\n\nuserList = Array.isArray(data) && data.map(user => (\n    <tr key={user._id}>\n      <td>{user.name}</td>\n      <td>${user.balance}</td>\n      <td>{user.email}</td>\n      <td>{user._id}</td>\n    </tr>\n  ));\n}\n\nReact.useEffect(() => {\n  fetch(`/account/getActivity/${currentUser.email}/${currentUser.role}`)\n  .then(response => response.json())\n  .then(newData => {\n    setActivityData(newData);\n  });\n}, []);\n\nlet activityList = Array.isArray(activityData) && activityData.slice().reverse().map(account => (\n  <tr key={account._id}>\n    <td>{account.email}</td>\n    <td>{account.activity}</td>\n    <td>{new Date(account.date).toLocaleString()}</td>\n  </tr>\n));\n\nreturn (\n  <div>\n    \n      {(currentUser.role === \"admin\") &&\n         <Card \n         bgcolor=\"primary\"\n         txtcolor=\"white\"\n         header=\"Admin: All Users\"\n         body={\n  <Table\n  id=\"usertable\"\n  col1=\"Name\"\n  col2=\"Balance\"\n  col3=\"Email\"\n  col4=\"ID\"\n  list={userList}\n  />}\n  />\n      }\n         <Card \n         bgcolor=\"primary\"\n         txtcolor=\"white\"\n         header={currentUser.role === \"admin\" ? \"Admin: All Bank Activity\" : \"My Activity\"}\n         body={\n<Table\n  id=\"activitytable\"\n  col1=\"Email\"\n  col2=\"Activity\"\n  col3=\"Date\"\n  list={activityList}\n  />}\n  />\n  \n  </div>\n\n);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}