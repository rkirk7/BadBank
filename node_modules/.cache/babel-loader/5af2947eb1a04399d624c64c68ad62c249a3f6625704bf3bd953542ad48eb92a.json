{"ast":null,"code":"import React from \"react\";\nimport { Table, CurrentUser } from \"./context\";\nexport default function AllData() {\n  const {\n    currentUser\n  } = React.useContext(CurrentUser);\n  const [data, setData] = React.useState([]);\n  const [activityData, setActivityData] = React.useState([]);\n  const [showAllUsers, setShowAllUsers] = React.useState(true);\n  const [showActivity, setShowActivity] = React.useState(true);\n  const [userSearch, setUserSearch] = React.useState('');\n  const [activitySearch, setActivitySearch] = React.useState('');\n  let userList;\n  if (currentUser.role === 'admin') {\n    React.useEffect(() => {\n      //fetch all accounts from API\n      fetch('/account/all').then(response => response.json()).then(data => {\n        setData(data);\n      });\n    }, []);\n    userList = Array.isArray(data) && data.map(user => /*#__PURE__*/React.createElement(\"tr\", {\n      key: user._id\n    }, /*#__PURE__*/React.createElement(\"td\", null, user.name), /*#__PURE__*/React.createElement(\"td\", null, \"$\", user.balance), /*#__PURE__*/React.createElement(\"td\", null, user.email), /*#__PURE__*/React.createElement(\"td\", null, user._id)));\n  }\n  React.useEffect(() => {\n    fetch(\"/account/getActivity/\".concat(currentUser.email, \"/\").concat(currentUser.role)).then(response => response.json()).then(newData => {\n      setActivityData(newData);\n    });\n  }, []);\n  let filteredActivityData = activityData.filter(account => {\n    setActivityData(account.email.includes(activitySearch));\n  });\n  let activityList = Array.isArray(filteredActivityData) && filteredActivityData.slice().reverse().map(account => /*#__PURE__*/React.createElement(\"tr\", {\n    key: account._id\n  }, /*#__PURE__*/React.createElement(\"td\", null, account.email), /*#__PURE__*/React.createElement(\"td\", null, account.activity), /*#__PURE__*/React.createElement(\"td\", null, new Date(account.date).toLocaleString())));\n  return /*#__PURE__*/React.createElement(\"div\", null, currentUser.role === \"admin\" && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tableheader\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"myLink\",\n    onClick: () => setShowAllUsers(!showAllUsers)\n  }, \"Admin: All Users\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search by Email\",\n    value: userSearch,\n    onChange: e => {\n      setUserSearch(e.currentTarget.value);\n    }\n  }), showAllUsers && /*#__PURE__*/React.createElement(Table, {\n    id: \"usertable\",\n    col1: \"Name\",\n    col2: \"Balance\",\n    col3: \"Email\",\n    col4: \"ID\",\n    list: userList\n  })), /*#__PURE__*/React.createElement(\"div\", null, currentUser.role === \"admin\" ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tableheader\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"myLink\",\n    onClick: () => setShowActivity(!showActivity)\n  }, \"Admin: All Bank Activity\")), showActivity && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search by Email\",\n    value: activitySearch,\n    onChange: e => {\n      setActivitySearch(e.currentTarget.value);\n    }\n  }), \";\") : /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tableheader\"\n  }, \"My Activity\"), showActivity && /*#__PURE__*/React.createElement(Table, {\n    id: \"activitytable\",\n    col1: \"Email\",\n    col2: \"Activity\",\n    col3: \"Date\",\n    list: activityList\n  })));\n}","map":{"version":3,"names":["React","Table","CurrentUser","AllData","currentUser","useContext","data","setData","useState","activityData","setActivityData","showAllUsers","setShowAllUsers","showActivity","setShowActivity","userSearch","setUserSearch","activitySearch","setActivitySearch","userList","role","useEffect","fetch","then","response","json","Array","isArray","map","user","createElement","key","_id","name","balance","email","concat","newData","filteredActivityData","filter","account","includes","activityList","slice","reverse","activity","Date","date","toLocaleString","className","onClick","type","placeholder","value","onChange","e","currentTarget","id","col1","col2","col3","col4","list"],"sources":["/Users/Regan/Documents/GitHub/BadBank/public/src/Components/alldata.js"],"sourcesContent":["import React from \"react\";\nimport {Table, CurrentUser} from \"./context\";\n\n\nexport default function AllData(){\n\n  const { currentUser } = React.useContext(CurrentUser);\n  const [data, setData] = React.useState([]);\n  const [activityData, setActivityData] = React.useState([]);\n  const [showAllUsers, setShowAllUsers] = React.useState(true);\n  const [showActivity, setShowActivity] = React.useState(true);\n  const [userSearch, setUserSearch] = React.useState('');\n  const [activitySearch, setActivitySearch] = React.useState('');\n\n  let userList;\n\n  if (currentUser.role === 'admin') {\n  React.useEffect(() => {\n    //fetch all accounts from API\n    fetch('/account/all')\n    .then(response => response.json())\n    .then(data => {\n      setData(data);\n    });\n  }, []);\n\nuserList = Array.isArray(data) && data.map(user => (\n    <tr key={user._id}>\n      <td>{user.name}</td>\n      <td>${user.balance}</td>\n      <td>{user.email}</td>\n      <td>{user._id}</td>\n    </tr>\n  ));\n}\n\nReact.useEffect(() => {\n  fetch(`/account/getActivity/${currentUser.email}/${currentUser.role}`)\n  .then(response => response.json())\n  .then(newData => {\n    setActivityData(newData);\n  });\n}, []);\n\n  let filteredActivityData = activityData.filter(account => {\n    setActivityData(account.email.includes(activitySearch));\n  });\n\n\nlet activityList = Array.isArray(filteredActivityData) && filteredActivityData.slice().reverse().map(account => (\n  <tr key={account._id}>\n    <td>{account.email}</td>\n    <td>{account.activity}</td>\n    <td>{new Date(account.date).toLocaleString()}</td>\n  </tr>\n));\n\nreturn (\n  <div>\n      {currentUser.role === \"admin\" && (\n        <div>\n         <h1 className=\"tableheader\"><a  className=\"myLink\" onClick={ () => setShowAllUsers(!showAllUsers) }>Admin: All Users</a></h1>\n         <input type=\"text\" placeholder=\"Search by Email\" value={userSearch} onChange={e => {\n                setUserSearch(e.currentTarget.value);\n                }}></input>\n      \n      {showAllUsers && (\n      \n  <Table\n  id=\"usertable\"\n  col1=\"Name\"\n  col2=\"Balance\"\n  col3=\"Email\"\n  col4=\"ID\"\n  list={userList}\n  />\n      )}\n      </div>\n     )}\n     <div>\n     {currentUser.role === \"admin\" ? (\n      <div>\n     <h1 className=\"tableheader\"><a className=\"myLink\" onClick= { () => setShowActivity(!showActivity)}>Admin: All Bank Activity</a></h1>\n     {showActivity && (<input type=\"text\" placeholder=\"Search by Email\" value={activitySearch} onChange={e => {\n                setActivitySearch(e.currentTarget.value);\n                }}></input>\n              )};\n     </div>\n     \n     ) : (\n      <h1 className=\"tableheader\">My Activity</h1>\n     ) }\n\n      {showActivity && (\n\n<Table\n  id=\"activitytable\"\n  col1=\"Email\"\n  col2=\"Activity\"\n  col3=\"Date\"\n  list={activityList}\n  />\n      )}\n  </div>\n  </div>\n\n);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}