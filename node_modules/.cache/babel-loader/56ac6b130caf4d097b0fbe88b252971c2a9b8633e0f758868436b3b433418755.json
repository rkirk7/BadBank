{"ast":null,"code":"import React, { useState } from \"react\";\nimport { Card, CurrentUser } from \"./context\";\nimport { Link } from \"react-router-dom\";\nimport '../App.css';\nexport default function Home() {\n  const {\n    currentUser,\n    setCurrentUser\n  } = React.useContext(CurrentUser);\n  const [isUserSet, setIsUserSet] = useState(false);\n  async function getBalance(email) {\n    const url = \"/account/balance/\".concat(email);\n    var res = await fetch(url);\n    var data = await res.json();\n    setCurrentUser(user => ({\n      ...user,\n      balance: data.balance\n    }));\n  }\n  const authorizationURL = \"/account/authorization/\";\n  async function reviewAuthorization() {\n    var res = await fetch(authorizationURL);\n    if (res.ok) {\n      let user = await res.json();\n      if (!user.email) {\n        setCurrentUser({\n          name: '',\n          email: '',\n          balance: 0,\n          password: '',\n          role: 'none'\n        });\n        setIsUserSet(false);\n      } else {\n        setCurrentUser(user);\n        setIsUserSet(true);\n      }\n    }\n    ;\n  }\n  React.useEffect(() => {\n    if (currentUser.email === '') {\n      reviewAuthorization();\n    } else {\n      setIsUserSet(true);\n    }\n  }, []);\n  React.useEffect(() => {\n    if (isUserSet && currentUser.email) {\n      getBalance(currentUser.email);\n    }\n  }, [isUserSet]);\n  return /*#__PURE__*/React.createElement(Card, {\n    bgcolor: \"primary\",\n    txtcolor: \"white\",\n    header: \"Regan's Bad Bank\",\n    title: currentUser.name != '' ? \"Welcome, \".concat(currentUser.name, \".\") : '',\n    body: currentUser.name != '' ? /*#__PURE__*/React.createElement(React.Fragment, null, \"Your current balance is $\", currentUser.balance, \". You can \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/deposit\",\n      className: \"mylink\"\n    }, \"make a deposit\"), \" or \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/withdraw\",\n      className: \"mylink\"\n    }, \"withdraw fake cash\"), \"!\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"Please \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      className: \"mylink\"\n    }, \"log in\"), \" or \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/CreateAccount\",\n      className: \"mylink\"\n    }, \"create an account\"), \" to continue.\"),\n    centered: /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../Images/BadBankLogo.png'),\n      className: \"img-fluid\",\n      alt: \"Bank Icon\"\n    })\n  });\n}","map":{"version":3,"names":["React","useState","Card","CurrentUser","Link","Home","currentUser","setCurrentUser","useContext","isUserSet","setIsUserSet","getBalance","email","url","concat","res","fetch","data","json","user","balance","authorizationURL","reviewAuthorization","ok","name","password","role","useEffect","createElement","bgcolor","txtcolor","header","title","body","Fragment","to","className","centered","src","require","alt"],"sources":["/Users/Regan/Documents/GitHub/BadBank/public/src/Components/home.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport { Card, CurrentUser } from \"./context\";\nimport { Link } from \"react-router-dom\";\nimport '../App.css';\n\nexport default function Home(){\n  const { currentUser, setCurrentUser } = React.useContext(CurrentUser);\n  const [isUserSet, setIsUserSet] = useState(false);\n\n  async function getBalance(email) {\n    const url = `/account/balance/${email}`;\n    var res = await fetch(url);\n    var data = await res.json();\n  setCurrentUser(user => ({\n    ...user,\n    balance: data.balance\n  }));     \n}\n\n  const authorizationURL = `/account/authorization/`;\n    async function reviewAuthorization() {\n       var res = await fetch(authorizationURL);\n       if (res.ok) {\n       let user = await res.json();\n       if (!user.email) {\n        setCurrentUser({\n            name: '',\n            email: '',\n            balance: 0,\n            password: '',\n            role: 'none'\n           });\n           setIsUserSet(false);\n      } else {\n        setCurrentUser(user);\n        setIsUserSet(true);\n      }\n      }; \n    }\n      React.useEffect(() => {\n        if (currentUser.email === '') {\n        reviewAuthorization();\n        } else {\n          setIsUserSet(true);\n        }\n      }, []);\n\n      React.useEffect(() => {\n        if (isUserSet && currentUser.email) {\n        getBalance(currentUser.email);\n        }\n      }, [isUserSet]);\n\n    return (\n       <Card \n       bgcolor=\"primary\"\n       txtcolor=\"white\"\n       header=\"Regan's Bad Bank\"\n       title={currentUser.name != '' ? `Welcome, ${currentUser.name}.` : ''}       \n       body={currentUser.name != '' ? (\n      <>\n       Your current balance is ${currentUser.balance}. You can <Link to=\"/deposit\" className=\"mylink\">make a deposit</Link> or <Link to=\"/withdraw\" className=\"mylink\">withdraw fake cash</Link>!\n       </>\n       ) : (\n       <>\n       Please <Link to=\"/login\" className=\"mylink\">log in</Link> or <Link to=\"/CreateAccount\" className=\"mylink\">create an account</Link> to continue.\n     </>\n       )\n      }       \n       centered={(<img src={require ('../Images/BadBankLogo.png')} className=\"img-fluid\" alt=\"Bank Icon\" />)}\n       \n       />\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}